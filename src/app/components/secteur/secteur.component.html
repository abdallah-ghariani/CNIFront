<div class="p-4">
    <p-confirmdialog></p-confirmdialog>
  
    <button pButton label="Add Secteur" class="p-button-primary mb-3" (click)="openAddDialog()"></button>
  
    <p-table
      [value]="secteurs()"
      [paginator]="true"
      [rows]="5"
      [loading]="loading"
      [totalRecords]="total"
      (onLazyLoad)="loadSecteurs($event)"
      [lazy]="true"
      [rowsPerPageOptions]="[5, 10, 20]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-secteur let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td>{{ secteur.name }}</td>
          <td>
            <button pButton label="Edit" class="p-button-rounded p-button-info mr-2" (click)="openEditDialog(secteur)"></button>
            <button pButton label="Delete" class="p-button-rounded p-button-danger" (click)="deleteSecteur(secteur.id)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  
  <!-- Edit Dialog -->
  <p-dialog header="Edit Secteur" [(visible)]="displayEditDialog" [modal]="true" [closable]="false" [style]="{ width: '30rem' }">
    <div class="mb-3">
      <label class="block mb-1">Name</label>
      <input pInputText [(ngModel)]="selectedSecteur.name" class="w-full p-2 border rounded" />
    </div>
  
    <div class="text-red-500 text-sm mb-2" *ngIf="errorMessage">{{ errorMessage }}</div>
  
    <ng-template pTemplate="footer">
      <button pButton label="Save" icon="pi pi-check" (click)="saveSecteur()"></button>
      <button pButton label="Cancel" icon="pi pi-times" class="p-button-secondary" (click)="displayEditDialog = false"></button>
    </ng-template>
  </p-dialog>
  
  <!-- Add Dialog -->
  <p-dialog header="Add Secteur" [(visible)]="displayAddDialog" [modal]="true" [closable]="false" [style]="{ width: '30rem' }">
    <div class="mb-3">
      <label class="block mb-1">Name</label>
      <input pInputText [(ngModel)]="newSecteur.name" class="w-full p-2 border rounded" />
    </div>
  
    <div class="text-red-500 text-sm mb-2" *ngIf="errorMessage">{{ errorMessage }}</div>
  
    <ng-template pTemplate="footer">
      <button pButton label="Cancel" class="p-button-secondary" (click)="displayAddDialog = false"></button>
      <button pButton label="Add" class="p-button-primary" (click)="addSecteur()" [disabled]="!newSecteur.name"></button>
    </ng-template>
  </p-dialog>
  